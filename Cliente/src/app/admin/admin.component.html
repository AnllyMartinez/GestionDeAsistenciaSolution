<div class="admin-dashboard">
  <h3 class="text-center mb-4">Panel de Administración</h3>

  <div class="mb-4">
    <h4>Gestión de Usuarios</h4>
    <div class="d-flex justify-content-between align-items-center mb-3">
      <button
        class="btn btn-success"
        data-bs-toggle="modal"
        data-bs-target="#crearUsuarioModal"
      >
        Crear Usuario
      </button>
      <select class="form-select w-25">
        <option selected>Filtrar por Rol</option>
        <option value="admin">Administrador</option>
        <option value="user">Usuario</option>
      </select>
    </div>
    <table class="table table-striped table-bordered">
      <thead class="table-dark">
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Email</th>
          <th>Rol</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let usuario of usuarios">
          <td>{{ usuario.usuarioID }}</td>
          <td>{{ usuario.nombre }} {{ usuario.apellido }}</td>
          <td>{{ usuario.email }}</td>
          <td>{{ usuario.rol.nombreRol }}</td>
          <td>
            <button
              class="btn btn-warning btn-sm"
              data-bs-toggle="modal"
              data-bs-target="#editarUsuarioModal"
              (click)="editarUsuario(usuario)"
            >
              Editar
            </button>
            <button
              class="btn btn-danger btn-sm"
              (click)="eliminarUsuario(usuario.usuarioID)"
            >
              Eliminar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Gestión de Roles -->
  <div class="mb-4">
    <h4>Gestión de Roles</h4>
    <div class="d-flex justify-content-between align-items-center mb-3">
      <button
        class="btn btn-primary"
        data-bs-toggle="modal"
        data-bs-target="#crearRolModal"
      >
        Crear Rol
      </button>
    </div>
    <ul class="list-group">
      <li
        class="list-group-item d-flex justify-content-between align-items-center"
      >
        Administrador
        <button class="btn btn-info btn-sm">Editar</button>
        <button class="btn btn-danger btn-sm">Eliminar</button>
      </li>
      <li
        class="list-group-item d-flex justify-content-between align-items-center"
      >
        Usuario
        <button class="btn btn-info btn-sm">Editar</button>
        <button class="btn btn-danger btn-sm">Eliminar</button>
      </li>
    </ul>
  </div>

  <div>
    <h4>Monitoreo de Registros</h4>
    <div class="d-flex justify-content-between align-items-center mb-3">
      <select class="form-select w-25">
        <option selected>Filtrar por Usuario</option>
        <option value="1">Usuario 1</option>
        <option value="2">Usuario 2</option>
      </select>
      <input type="date" class="form-control w-25" />
      <button class="btn btn-dark">Filtrar</button>
    </div>
    <div class="mb-4">
      <h5>Registros de Asistencia</h5>
      <table class="table table-striped table-bordered">
        <thead class="table-dark">
          <tr>
            <th>Fecha</th>
            <th>Hora</th>
            <th>Tipo</th>
            <th>Usuario</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let registro of registrosAsistencia">
            <td>{{ registro.fecha }}</td>
            <td>{{ registro.hora }}</td>
            <td>{{ registro.tipo }}</td>
            <td>{{ registro.usuario.nombre }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="mb-4">
      <h5>Registros de Horas Laborales</h5>
      <table class="table table-striped table-bordered">
        <thead class="table-dark">
          <tr>
            <th>Fecha</th>
            <th>Hora de Inicio</th>
            <th>Hora de Fin</th>
            <th>Usuario</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let registro of registrosHoras">
            <td>{{ registro.fecha }}</td>
            <td>{{ registro.horaInicio }}</td>
            <td>{{ registro.horaFin }}</td>
            <td>{{ registro.usuario.nombre }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div
  class="modal fade"
  id="crearUsuarioModal"
  tabindex="-1"
  aria-labelledby="crearUsuarioModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="crearUsuarioModalLabel">Crear Usuario</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <!-- Formulario para crear usuario -->
        <form>
          <div class="mb-3">
            <label for="nombre" class="form-label">Nombre</label>
            <input
              type="text"
              class="form-control"
              id="nombre"
              [(ngModel)]="nuevoUsuario.nombre"
              required
            />
          </div>
          <div class="mb-3">
            <label for="email" class="form-label">Email</label>
            <input
              type="email"
              class="form-control"
              id="email"
              [(ngModel)]="nuevoUsuario.email"
              required
            />
          </div>
          <div class="mb-3">
            <label for="rol" class="form-label">Rol</label>
            <select
              class="form-select"
              id="rol"
              [(ngModel)]="nuevoUsuario.rol"
              required
            >
              <option value="admin">Administrador</option>
              <option value="user">Usuario</option>
            </select>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cerrar
        </button>
        <button type="button" class="btn btn-primary" (click)="crearUsuario()">
          Crear Usuario
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal para Crear Rol -->
<div
  class="modal fade"
  id="crearRolModal"
  tabindex="-1"
  aria-labelledby="crearRolModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="crearRolModalLabel">Crear Rol</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <!-- Formulario para crear rol -->
        <form>
          <div class="mb-3">
            <label for="rolNombre" class="form-label">Nombre del Rol</label>
            <input
              type="text"
              class="form-control"
              id="rolNombre"
              [(ngModel)]="nuevoRol.nombre"
              required
            />
          </div>
          <div class="mb-3">
            <label for="rolDescripcion" class="form-label">Descripción</label>
            <textarea
              class="form-control"
              id="rolDescripcion"
              [(ngModel)]="nuevoRol.descripcion"
              required
            ></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cerrar
        </button>
        <button type="button" class="btn btn-primary" (click)="crearRol()">
          Crear Rol
        </button>
      </div>
    </div>
  </div>
</div>
